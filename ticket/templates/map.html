{% extends "layout.html" %}

{% block title %} Network Map {% endblock %}

{% block content %}
<style>
    h1 { text-align: center; }
    
    .line-card { margin-bottom: 2rem; }

    /* Forces the stations into a single line */
    .metro-line-container {
        display: flex;
        flex-wrap: nowrap;       /* Do not wrap to next line */
        align-items: center;
        justify-content: center; /* Center the visualization */
        width: 100%;
    }

    /* Scales the text and padding based on screen width */
    .station-badge { 
        /* Minimum 8px, Preference 2.5% of width, Max 1.1em */
        font-size: clamp(8px, 2.5vw, 1.1em); 
        /* Dynamic padding that shrinks on phone */
        padding: 0.5vw 1vw; 
        /* Prevents "Station Name" from splitting into two lines */
        white-space: nowrap; 
    }

    /* Scales the arrow and margins */
    .arrow { 
        margin: 0 0.5vw; 
        color: #adb5bd; 
        font-size: clamp(10px, 3vw, 1.2em);
    }
</style>

<br>
<h1>Metro Network Map</h1>
<br>

<div class="row justify-content-center">
    <div class="col-md-10">

        {% if map %}
            {% for item in map %}
                <div class="card line-card">
                    <div class="card-header">
                        <h3>{{ item.line }}</h3>
                    </div>
                    <div class="card-body">
                        <div class="metro-line-container">
                            
                            {% for station in item.stations %}
                                <span class="badge bg-secondary station-badge">
                                    {{ station }}
                                </span>

                                {% if not forloop.last %}
                                    <span class="arrow">&harr;</span>
                                {% endif %}
                            {% endfor %}

                            {% if not item.stations %}
                            <div class="alert alert-warning text-center">
                                No stations on this line.
                            </div>
                            {% endif %}

                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="alert alert-warning text-center">
                No metro lines found in the system.
            </div>
        {% endif %}

    </div>
</div>

{% endblock %}